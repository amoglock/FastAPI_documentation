<h3>Первые шаги</h3>

Простейший файл FastAPI может выглядеть так:

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def root():
    return {"message": "Hello World"}
```
Скопируйте этот код в свой `main.py`.

Запустите сервер:

```commandline
uvicorn main:app --reload
```

Ответ успешно запущенного сервера:

```
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [28720]
INFO:     Started server process [28722]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

>**Обратите внимание**<br>
> Команда `uvicorn main:app` содержит:
> * `main`: файл `main.py` ("модуль" Python)
> * `app`: объект `app = FastAPI()`, созданный в `main.py`
> * `--reload`: сервер автоматически перезагружается после изменений в коде. Используется только при разработке.

В ответе сервера есть, примерно, такая строка:

```
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

Эта строка показывает URL-адрес, где запустилось приложение на вашей локальной машине.

<h3>Проверка</h3>
Откройте свой браузер по адресу http://127.0.0.1:8000.\
Вы увидите такой JSON-ответ:

```
{"message": "Hello World"}
```

<h3>Интерактивная документация API</h3>
Теперь перейдите по адресу http://127.0.0.1:8000/docs. <br>
Вы увидите автоматическую документацию вашего API (предоставленную [Swagger](https://github.com/swagger-api/swagger-ui))

<img src="https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png" width="393" height="442.125">

<h3>Альтернативная документация API</h3>
А теперь, перейдем на http://127.0.0.1:8000/redoc. <br>
Вы увидите альтернативную автоматическую документацию (предоставленную [ReDoc](https://github.com/Rebilly/ReDoc/))

<img src="https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png" width="393" height="442.125">

<h3>OpenAPI</h3>
FastPI создает "схему" со всеми вашими API, используя стандарт Open API для описания этих API.

"Схема"

"Схема" это определение или описание чего-либо. Она не реализуется в коде - это абстрактный метод.

"Схема API"

В этом случае, Open API это спецификация которая предписывает как определять схему вашего API.

Это определение схемы включает в себя пути вашего API, параметры, которые они принимают, и т.д.

"Схема данных"

Термин "схема" можно также отнести к форме каких-либо данных, таких как содержимое JSON, например.

В таком случае это означало бы аттрибуты JSON, типы данных в нем и.т.д.

<h3>OpenAPI и схема JSON</h3>

OpenAPI определяет схему вашего API. Эта схема включает описание ("схемы") данных, отправленных
или полученных вашим API, используя схему JSON - стандарт для схем данных JSON.

<h3>Просмотр  `openapi.json`</h3>

Если вам интересно как выглядит необработанная схема JSON, FastAPI автоматически генерирует JSON(схему)
с описанием всех ваших API.

Посмотреть ее можно напрямую: http://127.0.0.1:8000/openapi.json.

На этой странице вы увидите JSON, начинающийся как-то так:
```JSON
{
    "openapi": "3.1.0",
    "info": {
        "title": "FastAPI",
        "version": "0.1.0"
    },
    "paths": {
        "/items/": {
            "get": {
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
```

<h3>Для чего нужен OpenAPI</h3>

Схема OpenAPI это то, что позволяет работать обоим встроенным системам документации.

Существуют и десятки альтернатив, но все они основаны на OpenAPI. Вы могли бы с легкостью добавить
любую альтернативную документацию в ваше приложение FastAPI.

Вы можете также использовать его чтобы автоматически генерировать код для клиентов, которые 
взаимодействуют с вашим API.

<h3>Повторим по шагам</h3>

<h4>Шаг 1: импортировать `FastAPI`</h4>

```python
from fastapi import FastAPI
```
`FastAPI` это класс Python который обеспечивает всю функциональность вашего API.

>**Технический момент**
> 
> `FastAPI` это класс который наследуется от `Starlette`.
> 
> Вы можете использовать всю функциональность Starlette с вашим FastAPI.

<h4>Шаг 2: создать экземпляр `FastAPI`</h4>
```python
from fastapi import FastAPI

app = FastAPI()
```
Здесь переменная `app` будет экземпляром класса `FastAPI`.

Это будет основной точкой взаимодействия для создания вашего API.

Это тот `app`, на который ссылается `uvicorn` в команде:
```commandline
uvicorn main:app --reload
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

Если вы создаете свое приложение как:
```python
from fastapi import FastAPI

my_awesome_api = FastAPI()
```

И оно находится в файле `main.py`, тогда вы можете запустить `uvicorn` как:
```commandline
uvicorn main:my_awesome_api --reload
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

<h4>Шаг 3: создать операцию пути</h4>
**Путь**

"Путь" здесь относится к части URL которая начинается с первого `/`.
То есть, например, в URL:
```
https://example.com/items/foo
```
...путь был бы таким:
```
/items/foo
```

>**Для информации**
> 
> "Путь" также часто называют "endpoint" или "route".

При создании API, путь это главный способ отделить "задачи" от "ресурсов".

**Операция**

"Операция" здесь относится к одному из HTTP "методов":
* POST
* GET
* PUT
* DELETE

..или более "экзотические":
* OPTIONS
* HEAD
* PATCH
* TRACE

В протоколе HTTP, вы можете взаимодействовать с каждым путем, используя один (или несколько)
этих "методов".
***
При создании API, вы обычно используете HTTP методы, чтобы выполнить определенное действие.

Обычно вы используете:
* `POST` : для создания данных
* `GET` : для чтения данных
* `PUT` : для изменения данных
* `DELETE` : для удаления данных

Поэтому в OpenAPI каждый HTTP метод называется "операцией".

Мы тоже будем называть из "операциями".

***Определение декоратора операции пути***

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def root():
    return {"message": "Hello World"}
```
`@app.get("/")` сообщает FastAPI, что функция ниже отвечает за обработку запросов, которые идут на:
* путь `/`
* используя операцию `get`

> **Информация о `@decorator`**
> 
> Такой синтаксис - `@какой-то код`, в питоне называют декоратор.
> 
> Вы ставите его сверху функции. Как декоративную вершину(Думаю отсюда и пошло название).
> 
> Декоратор принимает функцию под ним и делает что-либо с ней.
> 
> В нашем случае, декоратор говорит FastAPI что функция ниже отвечает за путь `/` при операции `get`.
> 
> Это и есть "декоратор операции пути."

Вы можете использовать и другие операции:
* `@app.post()`
* `@app.put()`
* `@app.dlete()`

..или более "экзотические":
* `@app.options()`
* `@app.head()`
* `@app.patch()`
* `@app.head()`

> **Совет**
> 
> Вы можете свободно использовать каждую операцию (HTTP метод) по своему усмотрению.
> 
> FastAPI не заставляет использовать какое-то определенное значение.
> 
> Информация представлена в качестве руководства, а не требования.
> 
> Например, при использовании GraphQL вы обычно осуществляете все действия, использую только POST операции.

<h4>Шаг 4: объявить функцию операции пути</h4>

Это наша "функция операции пути":
* Путь это `/`.
* Операция это `get`.
* Функция это функция под декоратором (под `@app.get("/")`).
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def root():
```
Обычная функция Python.
Она будет вызвана FastAPI каждый раз, когда получает запрос к URL `"/"`, используя операцию `GET`.

В этом примере, это `async` (асинхронная) функция.
***
Вы можете определить функцию как обычную, вместо `async def`:
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def root():
    return {"message": "Hello World"}
```

<h4>Шаг 5: вернуть содержимое</h4>
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def root():
    return {"message": "Hello World"}
```
Вы можете возвращать `dict`, `list`, единичные значения (`str`, `int`), и т.д.

Вы также можете вернуть модели Pydantic (об этом будет позже).
Существует множество других объектов и моделей, которые могут быть автоматически конвертированы в 
JSON(включая ORM и т.д.). Попробуйте использовать свои любимые, и очень вероятно, что они поддерживаются.

<h3>Повторим</h3>
* Импортируем `FastAPI`.
* Создаем экземпляр `app`.
* Пишем *декоратор операции пути* (например `@app.get("/")`).
* Пишем *функцию операции пути* (например `def root(): ...`).
* Запускаем сервер разработки (например `uvicorn main:app --reload`)
