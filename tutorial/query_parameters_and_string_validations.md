<h3>Параметры запроса и валидация строк</h3>

FastAPI позволяет объявлять дополнительную информацию и валидацию для параметров.

Возьмем, в качестве примера, такое приложение:

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/items/")
async def read_items(q: str | None = None):
    results = {"items": [{"item_id": "Foo"}, {"item_id": "Bar"}]}
    if q:
        results.update({"q": q})
    return results
```

Параметр запроса `q` это тип `Union[str, None]`(или `str | None` в Python 3.10), что означает, что его тип - `str`, но 
так же может быть `None`, а фактически, значение по умолчанию это `None`, так FastAPI будет знать, что параметр
необязателен.

> **Заметка**
> 
> FastApi будет знать что значение `q` необязательно, потому, что значение по умолчанию `None`.
> 
> `Union` в `Union[str, None]` предоставит редактору возможность оказывать лучшую поддержку и выявление ошибок.

<h3>Добавочная проверка</h3>

Мы собираемся обеспечить, что несмотря на то, что `q` опционален, но всегда когда он есть, его длина не превышает 50 символов.

<h4>Импорт `Query` и `Annotated`</h4>

Чтобы достичь этого, сперва импортируем:
* `Query` из `FastAPI`
* `Annotated` из `typing` (или из`typing_extensions` в Python ниже версии 3.9)

В Python 3.9 или выше, `Annotated` это часть стандартной библиотеки, поэтому вы можете импортировать его из `typing`.

```python
from typing import Annotated

from fastapi import FastAPI, Query

app = FastAPI()
```

> **Для информации**
> В FastAPI добавлена поддержка `Annotated` (и стала рекомендованной) в версии 0.95.0.
> 
> Если у вас более старая версия, можете получать ошибки, когда попытаетесь использовать `Annotated`.
> 
> Убедитесь, что вы обновили версию FastAPI по крайней мере на 0.95.1 перед использованием `Annotated`.

<h3>Использование `Annotated` в типе для параметра `q`</h3>

`Annotated` может быть использован, чтобы добавить метаданные вашим параметрам.

Сейчас самое время использовать это в FastAPI.

У нас есть такая аннотация типов:

```python
q: str | None = None
```

Что мы сделаем, так это обернем ее в `Annotated` и она станет такой:

```python
q: Annotated[str | None] = None
```

Обе эти версии означают одно и то же, `q` это параметр, который может быть `str` или `None`, и по умолчанию он `None`.

А теперь перейдем к самому интересному.

